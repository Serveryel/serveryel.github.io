<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width initial-scale=1.0" charset="utf-8">
		<title>Cavernicola</title>
		<!-- link to main stylesheet -->
		<link rel="stylesheet" type="text/css" href="css/main.css"/>
	</head>
	<body>
		<nav>
    		
        		Nuestras redes sociales
	        	<a href="https://www.youtube.com/" target="_blank"><img title="Canal en You Tube" src="i/youtube.png" alt="You Tube" /></a>
        		<a href="https://soundcloud.com/" target="_blank"><img title="Soundcloud" src="i/soundcloud.png" alt="Soundcloud" /></a>
        		<a href="https://www.facebook.com/" target="_blank"><img title="Facebook" src="i/facebook.png" alt="Facebook" /></a>
    		
		</nav>
		<div>
			<div>
				<img id="cover" src="i/pegasus.jpg" width="25%"/>
				<audio id="player" controls>
			  		<source id="source" src="" type="audio/mpeg">

					Tu navegador no soporta este elemento de audio.
				</audio>
			 
			</div>
			<div>
				<table>
					
					<tr class="playable" id="song1">	
						<td><img id="img1" src="i/playmini.png"></td>
						<td>Fantasticats</td>
						<td>4:48</td>
						<td id="link1" hidden>m/cats.mp3</td>
						<td id="cover1" hidden>i/anio13.jpg</td>
					</tr>
					<tr class="playable" id="song2">	
						<td><img id="img3" src="i/playmini.png"></td>
						<td>Libelula lunar</td>
						<td>4:12</td>
						<td id="m/libelula.mp3" hidden>m/libelula.mp3</td>
						<td id="cover2" hidden>i/mixelanea.jpg</td>
					</tr>
					<tr class="playable" id="song3">	
						<td><img id="img3" src="i/playmini.png"></td>
						<td>Fin</td>
						<td>1:24</td>
						<td id="link3" hidden>m/fin.mp3</td>
						<td id="cover3" hidden>i/pegasus.jpg</td>
					</tr>
				</table> 
			</div>
		</div>
    		
		
	</body>
	<footer>
    		<small>&copy; Copyright <script>document.write(new Date().getFullYear())</script>, Discogr√°fica cavernicola</small>
	</footer>

	<script>
		var player;
		var cover;
		var nSings;
		var nSing;
		var shadow;
		document.body.onload=function(){
			
			var buttons = document.getElementsByClassName("playable");
			player=document.getElementById("player");
			cover=document.getElementById("cover");
			nSings=document.getElementsByTagName("tr").length;
			

			for(var i = 0; i < buttons.length; i++) {

   				buttons[i].addEventListener('click',
				function(event){
					play(document.getElementById(event.currentTarget.id));
				});
			}
			document.getElementById("player").addEventListener('ended', function () {
   				var n=nSing;
				
				if(n==nSings){
					n=1;
				}else{
					n=n+1;
				}
				var id="song"+n.toString();
   				play(document.getElementById(id));
 			}, false);
		}
		function play(song){
			
			
			
			if(shadow!=null){
				shadow.style.backgroundColor="white";
				shadow.style.color="black";

			}
			var id=song.id;
			nSing=parseInt(id.substr(id.length-1,1));
			
			shadow=song;
			song.style.backgroundColor="#7a7a7a";
			song.style.color="white";
			
			var td=song.getElementsByTagName("td");
			document.getElementById("source").src=td[3].innerText;
			cover.src=td[4].innerText;
			player.load();
			player.play();
			
			
			
		}
		


	</script>
</html>
